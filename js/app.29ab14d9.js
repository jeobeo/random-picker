(function(){"use strict";var n={5064:function(n,i,e){var t=e(5130),s=e(6768),o=e(4232);const r={class:"container"},a={class:"grid"},c={key:0,class:"choices"},h=["onClick"],u={key:1},l=["disabled"],d={class:"spinner-container"},k={class:"spinner"},p={class:"progress-circle",viewBox:"0 0 36 36"};function g(n,i,e,g,f,m){return(0,s.uX)(),(0,s.CE)("div",r,[i[5]||(i[5]=(0,s.Lk)("h1",null,"Random Picker",-1)),(0,s.Lk)("div",a,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":i[0]||(i[0]=n=>f.newChoice=n),placeholder:"Enter a choice",class:"input"},null,512),[[t.Jo,f.newChoice]]),(0,s.bo)((0,s.Lk)("input",{type:"number","onUpdate:modelValue":i[1]||(i[1]=n=>f.newOdds=n),min:"1",placeholder:"Odds (default 1)",class:"input"},null,512),[[t.Jo,f.newOdds]]),(0,s.Lk)("button",{onClick:i[2]||(i[2]=(...n)=>m.addChoice&&m.addChoice(...n)),class:"contrast button thin-button"}," Add Choice ")]),f.choices.length>0?((0,s.uX)(),(0,s.CE)("div",c,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(f.choices,((n,i)=>((0,s.uX)(),(0,s.CE)("li",{key:i,class:"choice-item"},[(0,s.Lk)("span",null,(0,o.v_)(n.name)+" (Odds: "+(0,o.v_)(n.odds)+")",1),(0,s.Lk)("button",{onClick:n=>m.removeChoice(i),class:"button small square-button"}," Remove ",8,h)])))),128))])):((0,s.uX)(),(0,s.CE)("p",u,"No choices added yet.")),(0,s.Lk)("button",{onClick:i[3]||(i[3]=(...n)=>m.chooseWinner&&m.chooseWinner(...n)),disabled:f.picking||0===f.choices.length,class:"button primary spin-button"}," Choose Winner ",8,l),(0,s.Lk)("div",d,[(0,s.Lk)("h2",k,(0,o.v_)(f.spinnerText),1),((0,s.uX)(),(0,s.CE)("svg",p,[i[4]||(i[4]=(0,s.Lk)("path",{class:"progress-circle-bg",d:"M18 2.0845\n             a 15.9155 15.9155 0 0 1 0 31.831\n             a 15.9155 15.9155 0 0 1 0 -31.831"},null,-1)),(0,s.Lk)("path",{class:"progress-circle-fill",style:(0,o.Tr)(m.circleStyle),d:"M18 2.0845\n             a 15.9155 15.9155 0 0 1 0 31.831\n             a 15.9155 15.9155 0 0 1 0 -31.831"},null,4)]))])])}e(4114);var f={data(){return{newChoice:"",newOdds:1,choices:[{name:"a",odds:1},{name:"b",odds:2}],MAX_LOCK_IN_TIME:15e3,MIN_FAKE_LOCK_DURATION:4e3,MAX_FAKE_LOCK_DURATION:14e3,MIN_SPIN_TIME:0,MAX_TOTAL_TIME:12e4,picking:!1,confirmedWinner:!1,spinnerText:"Waiting...",finalPick:null,remainingTime:0,baitDuration:0,lockInProgress:0,isLockingIn:!1,isFakeLocking:!1,previousFakeAnswer:null}},computed:{circleStyle(){const n=this.lockInProgress,i={r:255,g:140,b:0},e={r:76,g:175,b:80},t=n/100,s=Math.round(i.r+t*(e.r-i.r)),o=Math.round(i.g+t*(e.g-i.g)),r=Math.round(i.b+t*(e.b-i.b)),a=`rgb(${s}, ${o}, ${r})`;return{strokeDasharray:`${n}, 100`,stroke:a}}},methods:{addChoice(){this.newChoice.trim()&&this.newOdds>0&&(this.choices.push({name:this.newChoice,odds:Number(this.newOdds)}),this.newChoice="",this.newOdds=1)},removeChoice(n){this.choices.splice(n,1)},async chooseWinner(){0===this.choices.length||this.picking||(this.picking=!0,this.confirmedWinner=!1,this.spinnerText="Spinning...",this.previousFakeAnswer=null,this.finalPick=this.pickRandomChoice(),this.baitDuration=this.getRandomBaitDuration(),this.remainingTime=this.baitDuration,await this.startBaiting(),await this.startFinalLockIn())},pickRandomChoice(){const n=this.getWeightedChoices(),i=Math.floor(Math.random()*n.length);return n[i]},getWeightedChoices(){const n=[];return this.choices.forEach((i=>{for(let e=0;e<i.odds;e++)n.push(i.name)})),n},async startBaiting(){this.isFakeLocking=!0;while(this.remainingTime>0){const n=this.pickRandomFakeAnswer(),i=this.getRandomFakeLockDuration(),e=Math.min(i,this.remainingTime);this.remainingTime-=e,this.spinnerText=n,await this.animateProgress(e,this.MAX_LOCK_IN_TIME),this.lockInProgress=0}this.isFakeLocking=!1,this.lockInProgress=0},pickRandomFakeAnswer(){let n;do{n=this.pickRandomChoice()}while(n===this.previousFakeAnswer&&this.choices.length>1);return this.previousFakeAnswer=n,n},async startFinalLockIn(){this.isLockingIn=!0,this.spinnerText=this.finalPick,await this.animateProgress(this.MAX_LOCK_IN_TIME,this.MAX_LOCK_IN_TIME),this.finalizeWinner()},finalizeWinner(){this.spinnerText=this.finalPick,this.confirmedWinner=!0,this.picking=!1,this.isLockingIn=!1},animateProgress(n,i){return new Promise((e=>{const t=performance.now(),s=o=>{const r=o-t;this.lockInProgress=r/i*100,r<n?requestAnimationFrame(s):(this.lockInProgress=n/i*100,e())};requestAnimationFrame(s)}))},getRandomBaitDuration(){return Math.random()*(this.MAX_TOTAL_TIME-this.MIN_SPIN_TIME)+this.MIN_SPIN_TIME},getRandomFakeLockDuration(){return Math.random()*(this.MAX_FAKE_LOCK_DURATION-this.MIN_FAKE_LOCK_DURATION)+this.MIN_FAKE_LOCK_DURATION}}},m=e(1241);const _=(0,m.A)(f,[["render",g],["__scopeId","data-v-2378bb19"]]);var b=_;(0,t.Ef)(b).mount("#app")}},i={};function e(t){var s=i[t];if(void 0!==s)return s.exports;var o=i[t]={exports:{}};return n[t].call(o.exports,o,o.exports,e),o.exports}e.m=n,function(){var n=[];e.O=function(i,t,s,o){if(!t){var r=1/0;for(u=0;u<n.length;u++){t=n[u][0],s=n[u][1],o=n[u][2];for(var a=!0,c=0;c<t.length;c++)(!1&o||r>=o)&&Object.keys(e.O).every((function(n){return e.O[n](t[c])}))?t.splice(c--,1):(a=!1,o<r&&(r=o));if(a){n.splice(u--,1);var h=s();void 0!==h&&(i=h)}}return i}o=o||0;for(var u=n.length;u>0&&n[u-1][2]>o;u--)n[u]=n[u-1];n[u]=[t,s,o]}}(),function(){e.n=function(n){var i=n&&n.__esModule?function(){return n["default"]}:function(){return n};return e.d(i,{a:i}),i}}(),function(){e.d=function(n,i){for(var t in i)e.o(i,t)&&!e.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:i[t]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(n){if("object"===typeof window)return window}}()}(),function(){e.o=function(n,i){return Object.prototype.hasOwnProperty.call(n,i)}}(),function(){var n={524:0};e.O.j=function(i){return 0===n[i]};var i=function(i,t){var s,o,r=t[0],a=t[1],c=t[2],h=0;if(r.some((function(i){return 0!==n[i]}))){for(s in a)e.o(a,s)&&(e.m[s]=a[s]);if(c)var u=c(e)}for(i&&i(t);h<r.length;h++)o=r[h],e.o(n,o)&&n[o]&&n[o][0](),n[o]=0;return e.O(u)},t=self["webpackChunkfun_picker"]=self["webpackChunkfun_picker"]||[];t.forEach(i.bind(null,0)),t.push=i.bind(null,t.push.bind(t))}();var t=e.O(void 0,[504],(function(){return e(5064)}));t=e.O(t)})();
//# sourceMappingURL=app.29ab14d9.js.map